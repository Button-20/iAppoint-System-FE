"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[355],{3355:(E,b,a)=>{a.r(b),a.d(b,{MainModule:()=>z});var l=a(6814),f=a(822),p=a(8308),t=a(4946);let v=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-home"]],decls:2,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"home works!"),t.qZA())}}),o})();var C=a(2181),Z=a(7398),x=a(6593),M=a(2362),y=a(4047);const P=function(){return{width:"15em"}};let O=(()=>{class o{constructor(e,n,i){this.router=e,this.activatedRoute=n,this.titleService=i,this.router.events.pipe((0,C.h)(r=>r instanceof p.m2),(0,Z.U)(()=>{let r=this.activatedRoute.firstChild;for(;r;){if(!r.firstChild)return r.snapshot.data&&r.snapshot.data.title?r.snapshot.data.title:null;r=r.firstChild}return null})).subscribe(r=>{r&&this.titleService.setTitle(r+" - iAppoint")})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.F0),t.Y36(p.gz),t.Y36(x.Dx))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-main"]],decls:10,vars:2,consts:[[1,"d-flex","align-item-center","min-vh-100","bg-img"],[1,"backdrop"],[1,"backdrop-img"],[1,"col-2","sidenav",3,"ngStyle"],[1,"col"],[1,"container-fluid","g-0","px-0"],[1,"mt-6"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"div",1)(2,"div",2),t.TgZ(3,"div",3),t._UZ(4,"sidebar"),t.qZA(),t.TgZ(5,"main",4)(6,"div",5),t._UZ(7,"navbar"),t.TgZ(8,"div",6),t._UZ(9,"router-outlet"),t.qZA()()()()),2&e&&(t.xp6(3),t.Q6J("ngStyle",t.DdM(1,P)))},dependencies:[l.PC,p.lC,M.k,y.S],styles:[".bg-img[_ngcontent-%COMP%]{position:relative}.backdrop-img[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:-2;width:100%;height:100%;background:url(background.0a6a9c4af100a2d5.jpg) no-repeat center center fixed}.backdrop[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:-1;width:100%;height:100%;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:rgba(255,255,255,.25)}.container-fluid[_ngcontent-%COMP%]{z-index:1;background:rgba(255,255,255,.2);height:100%;border-radius:50px 0 0 50px}"]}),o})();var d=a(5861),h=a(3096),m=a(8166),g=a(5046),u=a(7251),S=a(6180);function A(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",19),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"div",20),t._UZ(5,"img",21),t.TgZ(6,"p",22),t._uU(7),t.qZA()()(),t.TgZ(8,"td")(9,"p",22),t._uU(10),t.qZA()(),t.TgZ(11,"td")(12,"span",23),t._uU(13),t.ALo(14,"titlecase"),t.qZA()(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"date"),t.qZA(),t.TgZ(18,"td")(19,"div",24)(20,"button",25),t._UZ(21,"i",26),t.qZA(),t.TgZ(22,"button",27),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onDelete(r._id))}),t._UZ(23,"i",28),t.qZA()()()()}if(2&o){const e=s.$implicit;t.xp6(2),t.hij(" ","#"+e._id.slice(-8)," "),t.xp6(3),t.Q6J("src",e.picture,t.LSH),t.xp6(2),t.hij(" ",e.fullname," "),t.xp6(3),t.hij(" ",e.email," "),t.xp6(2),t.Q6J("ngClass","super_admin"===e.role?"bg-info":"user"===e.role?"bg-success":"bg-warning"),t.xp6(1),t.hij(" ",t.lcZ(14,7,e.role.replace("_"," "))," "),t.xp6(3),t.hij(" ",t.xi3(17,9,e.createdAt,"mediumDate")," ")}}let T=(()=>{class o{constructor(e,n){this.usersService=e,this.globals=n,this.modalId="staffFormModal"}ngOnInit(){var e=this;return(0,d.Z)(function*(){yield e.usersService.getStaff()})()}ngAfterViewInit(){this.startListener()}onDelete(e){var n=this;return(0,d.Z)(function*(){if(confirm("Are you sure you want to delete this user?")){n.globals.spinner.show();const i=yield n.usersService.deleteUser(e);n.globals.spinner.hide(),n.globals.toast.success(i.message),yield n.usersService.getStaff()}})()}onSubmit(e){var n=this;return(0,d.Z)(function*(){n.globals.spinner.show(),n.usersService.user?._id?yield n.usersService.updateUser(e):yield n.usersService.postStaff(e),yield n.usersService.getStaff(),n.globals.spinner.hide()})()}startListener(){let e=document.querySelector(".table-responsive");e&&e.addEventListener("scroll",n=>{let r=n.target.scrollTop,c=document.getElementById("table-header");r+100>=200?c?.classList.add("shadow"):c?.classList.remove("shadow")})}onPageChange(e){var n=this;return(0,d.Z)(function*(){n.usersService.staffPagination.page=e,yield n.usersService.getStaff()})()}resetData(){this.usersService.staff=null}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.f),t.Y36(m.d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-staff"]],decls:32,vars:9,consts:[[1,"container","mt-5"],[1,"row","g-0","mx-3","mb-5"],[1,"col-4"],[1,"searchbar"],["type","text","name","","placeholder","Search by Full Name or Email"],[1,"bi","bi-search"],[1,"col","text-end"],["type","button","data-bs-toggle","modal",1,"btn","btn-primary"],[1,"bi","bi-plus-circle","me-2"],[1,"table-responsive","mx-3"],[1,"table","table-borderless","align-middle"],["id","table-header"],[1,"fw-500","bg-none"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],[1,"mx-3","mt-2"],[3,"totalItems","itemsPerPage"],["size","xl",3,"modalId","centered","keyboard","backdrop"],[3,"staff","emitSubmit","dismissModal"],["scope","row"],[1,"d-flex","align-items-center","gap-3"],["loading","lazy","alt","User Avatar",1,"img-fluid","avatar","rounded-circle",3,"src"],[1,"mb-0","fw-500"],[1,"badge","rounded-pill","text-bg-info","fs-14","text-white","px-3","py-2",3,"ngClass"],[1,"d-flex","align-items-center","gap-2"],[1,"actionBtn","text-primary"],[1,"bi","bi-pencil-square"],[1,"actionBtn","text-danger",3,"click"],[1,"bi","bi-x-lg"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"input",4)(5,"i",5),t.qZA()(),t.TgZ(6,"div",6)(7,"button",7),t._UZ(8,"i",8),t._uU(9," Add Staff "),t.qZA()()(),t.TgZ(10,"div",9)(11,"table",10)(12,"thead",11)(13,"tr")(14,"th",12),t._uU(15,"ID"),t.qZA(),t.TgZ(16,"th",12),t._uU(17,"Full Name"),t.qZA(),t.TgZ(18,"th",12),t._uU(19,"Email"),t.qZA(),t.TgZ(20,"th",12),t._uU(21,"Role"),t.qZA(),t.TgZ(22,"th",12),t._uU(23,"Joined"),t.qZA(),t.TgZ(24,"th",12),t._uU(25,"Action"),t.qZA()()(),t.TgZ(26,"tbody",13),t.YNc(27,A,24,12,"tr",14),t.qZA()()(),t.TgZ(28,"div",15),t._UZ(29,"pagination",16),t.qZA()(),t.TgZ(30,"modal",17)(31,"staff-form",18),t.NdJ("emitSubmit",function(r){return n.onSubmit(r)})("dismissModal",function(){return n.resetData()}),t.qZA()()),2&e&&(t.xp6(7),t.uIk("data-bs-target","#"+n.modalId),t.xp6(20),t.Q6J("ngForOf",n.usersService.staffs),t.xp6(2),t.Q6J("totalItems",n.usersService.staffs.length)("itemsPerPage",5),t.xp6(1),t.Q6J("modalId",n.modalId)("centered",!0)("keyboard",!1)("backdrop","static"),t.xp6(1),t.Q6J("staff",n.usersService.staff))},dependencies:[l.mk,l.sg,g.z,u.Q,S.G,l.rS,l.uU],styles:["table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0 .8em}td[_ngcontent-%COMP%]{padding-top:1.2rem;padding-bottom:1.2rem;color:#333;text-align:left;word-wrap:break-word}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(1), .table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(1){border-top-left-radius:10px;border-bottom-left-radius:10px}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(6), .table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(6){border-top-right-radius:10px;border-bottom-right-radius:10px}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{background:rgba(255,255,255,.5)}.bg-none[_ngcontent-%COMP%]{background:none}.searchbar[_ngcontent-%COMP%]{background:rgba(255,255,255,.5);border-radius:1rem;padding:.8rem 1rem;width:100%;display:flex;align-items:center;gap:1rem;box-shadow:0 5px 16px -4px #1018281a,0 4px 6px -2px #10182808}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none;border:none;background:transparent;width:100%;font-size:14px}.avatar[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border-radius:50%;object-fit:cover;aspect-ratio:1/1}.actionBtn[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;cursor:pointer;border-radius:50%;padding:.5rem;width:2.5rem;height:2.5rem;transition:all .3s ease-in-out}.actionBtn.text-primary[_ngcontent-%COMP%]{background:var(--primary-light-color)}.actionBtn.text-danger[_ngcontent-%COMP%]{background:var(--danger-light-color)}.actionBtn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.actionBtn[_ngcontent-%COMP%]:active{transform:scale(.95)}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;background:rgba(255,255,255,.8)}.table-responsive[_ngcontent-%COMP%]{height:calc(100vh - 23em);overflow-y:scroll}"]}),o})();var U=a(5208),w=a(7126);function k(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",19),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"div",20),t._UZ(5,"img",21),t.TgZ(6,"p",22),t._uU(7),t.qZA()()(),t.TgZ(8,"td")(9,"p",22),t._uU(10),t.qZA()(),t.TgZ(11,"td")(12,"span",23),t._uU(13),t.ALo(14,"titlecase"),t.qZA()(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"date"),t.qZA(),t.TgZ(18,"td")(19,"div",24)(20,"button",25),t._UZ(21,"i",26),t.qZA(),t.TgZ(22,"button",27),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onDelete(r._id))}),t._UZ(23,"i",28),t.qZA()()()()}if(2&o){const e=s.$implicit;t.xp6(2),t.hij(" ","#"+e._id.slice(-8)," "),t.xp6(3),t.Q6J("src",e.picture,t.LSH),t.xp6(2),t.hij(" ",e.fullname," "),t.xp6(3),t.hij(" ",e.email," "),t.xp6(2),t.Q6J("ngClass","super_admin"===e.role?"bg-info":"user"===e.role?"bg-success":"bg-warning"),t.xp6(1),t.hij(" ",t.lcZ(14,7,e.role.replace("_"," "))," "),t.xp6(3),t.hij(" ",t.xi3(17,9,e.createdAt,"mediumDate")," ")}}let q=(()=>{class o{constructor(e,n,i){this.usersService=e,this.organisationsService=n,this.globals=i,this.modalId="userFormModal"}ngOnInit(){var e=this;return(0,d.Z)(function*(){yield e.usersService.getUsers(),yield e.organisationsService.getOrganisations()})()}ngAfterViewInit(){this.startListener()}onDelete(e){var n=this;return(0,d.Z)(function*(){confirm("Are you sure you want to delete this user?")&&(yield n.usersService.deleteUser(e),yield n.usersService.getUsers())})()}onSubmit(e){var n=this;return(0,d.Z)(function*(){n.globals.spinner.show(),n.usersService.user?._id?yield n.usersService.updateUser(e):yield n.usersService.postUser(e),yield n.usersService.getUsers(),n.globals.spinner.hide()})()}startListener(){let e=document.querySelector(".table-responsive");e&&e.addEventListener("scroll",n=>{let r=n.target.scrollTop,c=document.getElementById("table-header");r+100>=200?c?.classList.add("shadow"):c?.classList.remove("shadow")})}onPageChange(e){var n=this;return(0,d.Z)(function*(){n.usersService.usersPagination.page=e,yield n.usersService.getUsers()})()}search(e){var n=this;return(0,d.Z)(function*(){n.usersService.usersPagination.search=e.target.value,setTimeout((0,d.Z)(function*(){n.globals.spinner.show(),yield n.usersService.getUsers(),n.globals.spinner.hide()}),1500)})()}resetData(){this.usersService.user=null}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.f),t.Y36(U.s),t.Y36(m.d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-users"]],decls:32,vars:10,consts:[[1,"container","mt-5"],[1,"row","g-0","mx-3","mb-5"],[1,"col-4"],[1,"searchbar"],["type","text","name","search","placeholder","Search by Full Name or Email",3,"keyup"],[1,"bi","bi-search"],[1,"col","text-end"],["type","button","data-bs-toggle","modal",1,"btn","btn-primary"],[1,"bi","bi-plus-circle","me-2"],[1,"table-responsive","mx-3"],[1,"table","table-borderless","align-middle"],["id","table-header"],[1,"fw-500","bg-none"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],[1,"mx-3","mt-2"],[3,"totalItems","itemsPerPage"],["size","xl",3,"modalId","centered","keyboard","backdrop"],[3,"user","organisations","emitSubmit","dismissModal"],["scope","row"],[1,"d-flex","align-items-center","gap-3"],["loading","lazy","alt","User Avatar",1,"img-fluid","avatar","rounded-circle",3,"src"],[1,"mb-0","fw-500"],[1,"badge","rounded-pill","text-bg-info","fs-14","text-white","px-3","py-2",3,"ngClass"],[1,"d-flex","align-items-center","gap-2"],[1,"actionBtn","text-primary"],[1,"bi","bi-pencil-square"],[1,"actionBtn","text-danger",3,"click"],[1,"bi","bi-x-lg"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),t.NdJ("keyup",function(r){return n.search(r)}),t.qZA(),t._UZ(5,"i",5),t.qZA()(),t.TgZ(6,"div",6)(7,"button",7),t._UZ(8,"i",8),t._uU(9," Add User "),t.qZA()()(),t.TgZ(10,"div",9)(11,"table",10)(12,"thead",11)(13,"tr")(14,"th",12),t._uU(15,"ID"),t.qZA(),t.TgZ(16,"th",12),t._uU(17,"Full Name"),t.qZA(),t.TgZ(18,"th",12),t._uU(19,"Email"),t.qZA(),t.TgZ(20,"th",12),t._uU(21,"Role"),t.qZA(),t.TgZ(22,"th",12),t._uU(23,"Joined"),t.qZA(),t.TgZ(24,"th",12),t._uU(25,"Action"),t.qZA()()(),t.TgZ(26,"tbody",13),t.YNc(27,k,24,12,"tr",14),t.qZA()()(),t.TgZ(28,"div",15),t._UZ(29,"pagination",16),t.qZA()(),t.TgZ(30,"modal",17)(31,"user-form",18),t.NdJ("emitSubmit",function(r){return n.onSubmit(r)})("dismissModal",function(){return n.resetData()}),t.qZA()()),2&e&&(t.xp6(7),t.uIk("data-bs-target","#"+n.modalId),t.xp6(20),t.Q6J("ngForOf",n.usersService.users),t.xp6(2),t.Q6J("totalItems",n.usersService.users.length)("itemsPerPage",n.usersService.usersPagination.itemsPerPage),t.xp6(1),t.Q6J("modalId",n.modalId)("centered",!0)("keyboard",!1)("backdrop","static"),t.xp6(1),t.Q6J("user",n.usersService.user)("organisations",n.organisationsService.organisations))},dependencies:[l.mk,l.sg,g.z,u.Q,w.m,l.rS,l.uU],styles:["table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0 .8em}td[_ngcontent-%COMP%]{padding-top:1.2rem;padding-bottom:1.2rem;color:#333;text-align:left;word-wrap:break-word}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(1), .table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(1){border-top-left-radius:10px;border-bottom-left-radius:10px}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(6), .table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(6){border-top-right-radius:10px;border-bottom-right-radius:10px}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{background:rgba(255,255,255,.5)}.bg-none[_ngcontent-%COMP%]{background:none}.searchbar[_ngcontent-%COMP%]{background:rgba(255,255,255,.5);border-radius:1rem;padding:.8rem 1rem;width:100%;display:flex;align-items:center;gap:1rem;box-shadow:0 5px 16px -4px #1018281a,0 4px 6px -2px #10182808}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none;border:none;background:transparent;width:100%;font-size:14px}.avatar[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border-radius:50%;object-fit:cover;aspect-ratio:1/1}.actionBtn[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;cursor:pointer;border-radius:50%;padding:.5rem;width:2.5rem;height:2.5rem;transition:all .3s ease-in-out}.actionBtn.text-primary[_ngcontent-%COMP%]{background:var(--primary-light-color)}.actionBtn.text-danger[_ngcontent-%COMP%]{background:var(--danger-light-color)}.actionBtn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.actionBtn[_ngcontent-%COMP%]:active{transform:scale(.95)}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;background:rgba(255,255,255,.8)}.table-responsive[_ngcontent-%COMP%]{height:calc(100vh - 23em);overflow-y:scroll}"]}),o})();var I=a(2817),_=a(4039),B=a(2123);const J=function(o,s,e,n,i){return{"bg-info":o,"bg-success":s,"bg-danger":e,"bg-warning":n,"bg-secondary":i}};function F(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",15)(1,"div",16)(2,"div",17)(3,"div",18)(4,"h4",19),t._uU(5),t.qZA(),t.TgZ(6,"div",20),t._UZ(7,"i",21),t.TgZ(8,"ul",22)(9,"li")(10,"a",23),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.appointmentsService.appointment=r)}),t._UZ(11,"i",24),t._uU(12," Edit"),t.qZA()(),t.TgZ(13,"li")(14,"a",25),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onDelete(r._id))}),t._UZ(15,"i",26),t._uU(16," Delete"),t.qZA()()()()(),t.TgZ(17,"small",27),t._uU(18),t.ALo(19,"date"),t.qZA(),t.TgZ(20,"p",28),t._uU(21),t.qZA()()()()}if(2&o){const e=s.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngClass",t.qbA(9,J,"pending"===e.status,"completed"===e.status,"cancelled"===e.status,"rescheduled"===e.status,"overdue"===e.status)),t.xp6(4),t.AsE(" ",e.customer.firstname," ",e.customer.lastname," "),t.xp6(5),t.uIk("data-bs-target","#"+n.modalId),t.xp6(8),t.hij(" ",t.xi3(19,6,e.appointment_date,"dd MMMM yyyy hh:mm a")," "),t.xp6(3),t.hij(" ",e.description," ")}}let L=(()=>{class o{constructor(e,n,i){this.appointmentsService=e,this.customersService=n,this.globals=i,this.modalId="appointmentFormModal"}ngOnInit(){var e=this;return(0,d.Z)(function*(){yield e.appointmentsService.getAppointments(),yield e.customersService.getCustomersByOrganisation()})()}ngAfterViewInit(){this.startListener()}onDelete(e){var n=this;return(0,d.Z)(function*(){confirm("Are you sure you want to delete this appointment?")&&(n.globals.spinner.show(),yield n.appointmentsService.deleteAppointment(e),n.globals.spinner.hide(),yield n.appointmentsService.getAppointments())})()}startListener(){let e=document.querySelector(".table-responsive");e&&e.addEventListener("scroll",n=>{let r=n.target.scrollTop,c=document.getElementById("table-header");r+100>=200?c?.classList.add("shadow"):c?.classList.remove("shadow")})}search(e){var n=this;return(0,d.Z)(function*(){n.customersService.customersPagination.search=e.target.value,setTimeout((0,d.Z)(function*(){n.globals.spinner.show(),yield n.appointmentsService.getAppointments(),n.globals.spinner.hide()}),1500)})()}onSubmit(e){var n=this;return(0,d.Z)(function*(){n.globals.spinner.show(),n.appointmentsService.appointment?._id?yield n.appointmentsService.updateAppointment(e):yield n.appointmentsService.postAppointment(e),yield n.appointmentsService.getAppointments(),n.globals.spinner.hide()})()}onPageChange(e){var n=this;return(0,d.Z)(function*(){n.appointmentsService.appointmentsPagination.page=e,yield n.appointmentsService.getAppointments()})()}resetData(){this.appointmentsService.appointment=null}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(I.O),t.Y36(_.v),t.Y36(m.d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-appointments"]],decls:16,vars:10,consts:[[1,"container","mt-5"],[1,"row","g-0","mx-3","mb-5"],[1,"col-4"],[1,"searchbar"],["type","text","name","search","placeholder","Search by Customer's First Name or Last Name",3,"keyup"],[1,"bi","bi-search"],[1,"col","text-end"],["type","button","data-bs-toggle","modal",1,"btn","btn-primary"],[1,"bi","bi-plus-circle","me-2"],[1,"row","g-3","mx-3"],["class","col-3",4,"ngFor","ngForOf"],[1,"mx-3","mt-2"],[3,"totalItems","itemsPerPage"],["size","xl",3,"modalId","centered","keyboard","backdrop"],[3,"appointment","customers","emitSubmit","dismissModal"],[1,"col-3"],[1,"card",3,"ngClass"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center"],[1,"card-title","text-white"],[1,"dropdown"],["role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"bi","bi-three-dots-vertical"],[1,"dropdown-menu","dropend"],["data-bs-toggle","modal",1,"dropdown-item",3,"click"],[1,"bi","bi-pencil","me-2"],[1,"dropdown-item",3,"click"],[1,"bi","bi-trash","me-2"],[1,"text-white"],[1,"card-text","mt-3","text-white"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),t.NdJ("keyup",function(r){return n.search(r)}),t.qZA(),t._UZ(5,"i",5),t.qZA()(),t.TgZ(6,"div",6)(7,"button",7),t._UZ(8,"i",8),t._uU(9," Add Appointment "),t.qZA()()(),t.TgZ(10,"div",9),t.YNc(11,F,22,15,"div",10),t.qZA(),t.TgZ(12,"div",11),t._UZ(13,"pagination",12),t.qZA()(),t.TgZ(14,"modal",13)(15,"appointment-form",14),t.NdJ("emitSubmit",function(r){return n.onSubmit(r)})("dismissModal",function(){return n.resetData()}),t.qZA()()),2&e&&(t.xp6(7),t.uIk("data-bs-target","#"+n.modalId),t.xp6(4),t.Q6J("ngForOf",n.appointmentsService.appointments),t.xp6(2),t.Q6J("totalItems",n.appointmentsService.appointments.length)("itemsPerPage",n.appointmentsService.appointmentsPagination.itemsPerPage),t.xp6(1),t.Q6J("modalId",n.modalId)("centered",!0)("keyboard",!1)("backdrop","static"),t.xp6(1),t.Q6J("appointment",n.appointmentsService.appointment)("customers",n.customersService.customers))},dependencies:[l.mk,l.sg,g.z,u.Q,B.t,l.uU],styles:[".searchbar[_ngcontent-%COMP%]{background:rgba(255,255,255,.5);border-radius:1rem;padding:.8rem 1rem;width:100%;display:flex;align-items:center;gap:1rem;box-shadow:0 5px 16px -4px #1018281a,0 4px 6px -2px #10182808}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none;border:none;background:transparent;width:100%;font-size:14px}.avatar[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border-radius:50%;object-fit:cover;aspect-ratio:1/1}.actionBtn[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;cursor:pointer;border-radius:50%;padding:.5rem;width:2.5rem;height:2.5rem;transition:all .3s ease-in-out}.actionBtn.text-primary[_ngcontent-%COMP%]{background:var(--primary-light-color)}.actionBtn.text-danger[_ngcontent-%COMP%]{background:var(--danger-light-color)}.actionBtn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.actionBtn[_ngcontent-%COMP%]:active{transform:scale(.95)}.card[_ngcontent-%COMP%]{height:15rem}.card-text[_ngcontent-%COMP%]{-webkit-line-clamp:5;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical}"]}),o})();var D=a(8608);function Q(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",19),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"div",20),t._UZ(5,"img",21),t.TgZ(6,"p",22),t._uU(7),t.qZA()()(),t.TgZ(8,"td")(9,"p",22),t._uU(10),t.qZA()(),t.TgZ(11,"td")(12,"p",22),t._uU(13),t.ALo(14,"date"),t.qZA()(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"date"),t.qZA(),t.TgZ(18,"td")(19,"div",23)(20,"button",24),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.customersService.customer=r)}),t._UZ(21,"i",25),t.qZA(),t.TgZ(22,"button",26),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onDelete(r._id))}),t._UZ(23,"i",27),t.qZA()()()()}if(2&o){const e=s.$implicit,n=t.oxw();t.xp6(2),t.hij(" ","#"+e._id.slice(-8)," "),t.xp6(3),t.Q6J("src",e.picture,t.LSH),t.xp6(2),t.hij(" ",e.firstname+" "+e.lastname," "),t.xp6(3),t.AsE(" ",e.phone," ",e.phone_alt?" / "+e.phone_alt:""," "),t.xp6(3),t.hij(" ",t.xi3(14,8,e.dob,"mediumDate")," "),t.xp6(3),t.hij(" ",t.xi3(17,11,e.createdAt,"mediumDate")," "),t.xp6(4),t.uIk("data-bs-target","#"+n.modalId)}}const N=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"",component:O,children:[{path:"home",component:v,data:{title:"Dashboard"}},{path:"customers",component:(()=>{class o{constructor(e,n){this.customersService=e,this.globals=n,this.modalId="customerModal"}ngOnInit(){var e=this;return(0,d.Z)(function*(){e.globals.spinner.show(),yield e.customersService.getCustomersByOrganisation(),e.globals.spinner.hide()})()}ngAfterViewInit(){this.startListener()}onDelete(e){var n=this;return(0,d.Z)(function*(){if(confirm("Are you sure you want to delete this customer?")){n.globals.spinner.show();const i=yield n.customersService.deleteCustomer(e);n.globals.spinner.hide(),n.globals.toast.success(i.message),yield n.customersService.getCustomersByOrganisation()}})()}onSubmit(e){var n=this;return(0,d.Z)(function*(){n.globals.spinner.show(),n.customersService.customer?._id?yield n.customersService.updateCustomer(e):yield n.customersService.postCustomer(e),yield n.customersService.getCustomersByOrganisation(),n.globals.spinner.hide()})()}startListener(){let e=document.querySelector(".table-responsive");e&&e.addEventListener("scroll",n=>{let r=n.target.scrollTop,c=document.getElementById("table-header");r+100>=200?c?.classList.add("shadow"):c?.classList.remove("shadow")})}search(e){var n=this;return(0,d.Z)(function*(){n.customersService.customersPagination.search=e.target.value,setTimeout((0,d.Z)(function*(){n.globals.spinner.show(),yield n.customersService.getCustomersByOrganisation(),n.globals.spinner.hide()}),1500)})()}onPageChange(e){var n=this;return(0,d.Z)(function*(){n.customersService.customersPagination.page=e,yield n.customersService.getCustomersByOrganisation()})()}resetData(){this.customersService.customer=null}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_.v),t.Y36(m.d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-customers"]],decls:32,vars:9,consts:[[1,"container","mt-5"],[1,"row","g-0","mx-3","mb-5"],[1,"col-4"],[1,"searchbar"],["type","text","name","search","placeholder","Search by Customer's First Name or Last Name",3,"keyup"],[1,"bi","bi-search"],[1,"col","text-end"],["type","button","data-bs-toggle","modal",1,"btn","btn-primary"],[1,"bi","bi-plus-circle","me-2"],[1,"table-responsive","mx-3"],[1,"table","table-borderless","align-middle"],["id","table-header"],[1,"fw-500","bg-none"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],[1,"mx-3","mt-2"],[3,"totalItems","itemsPerPage"],["size","xl",3,"modalId","centered","keyboard","backdrop"],[3,"customer","emitSubmit","dismissModal"],["scope","row"],[1,"d-flex","align-items-center","gap-3"],["loading","lazy","alt","Customer Avatar",1,"img-fluid","avatar","rounded-circle",3,"src"],[1,"mb-0","fw-500"],[1,"d-flex","align-items-center","gap-2"],["data-bs-toggle","modal",1,"actionBtn","text-primary",3,"click"],[1,"bi","bi-pencil-square"],[1,"actionBtn","text-danger",3,"click"],[1,"bi","bi-x-lg"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),t.NdJ("keyup",function(r){return n.search(r)}),t.qZA(),t._UZ(5,"i",5),t.qZA()(),t.TgZ(6,"div",6)(7,"button",7),t._UZ(8,"i",8),t._uU(9," Add Customer "),t.qZA()()(),t.TgZ(10,"div",9)(11,"table",10)(12,"thead",11)(13,"tr")(14,"th",12),t._uU(15,"ID"),t.qZA(),t.TgZ(16,"th",12),t._uU(17,"Full Name"),t.qZA(),t.TgZ(18,"th",12),t._uU(19,"Phone"),t.qZA(),t.TgZ(20,"th",12),t._uU(21,"D.O.B"),t.qZA(),t.TgZ(22,"th",12),t._uU(23,"Joined"),t.qZA(),t.TgZ(24,"th",12),t._uU(25,"Action"),t.qZA()()(),t.TgZ(26,"tbody",13),t.YNc(27,Q,24,14,"tr",14),t.qZA()()(),t.TgZ(28,"div",15),t._UZ(29,"pagination",16),t.qZA()(),t.TgZ(30,"modal",17)(31,"customer-form",18),t.NdJ("emitSubmit",function(r){return n.onSubmit(r)})("dismissModal",function(){return n.resetData()}),t.qZA()()),2&e&&(t.xp6(7),t.uIk("data-bs-target","#"+n.modalId),t.xp6(20),t.Q6J("ngForOf",n.customersService.customers),t.xp6(2),t.Q6J("totalItems",n.customersService.customers.length)("itemsPerPage",n.customersService.customersPagination.itemsPerPage),t.xp6(1),t.Q6J("modalId",n.modalId)("centered",!0)("keyboard",!1)("backdrop","static"),t.xp6(1),t.Q6J("customer",n.customersService.customer))},dependencies:[l.sg,g.z,u.Q,D.O,l.uU],styles:["table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0 .8em}td[_ngcontent-%COMP%]{padding-top:1.2rem;padding-bottom:1.2rem;color:#333;text-align:left;word-wrap:break-word}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(1), .table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(1){border-top-left-radius:10px;border-bottom-left-radius:10px}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(6), .table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(6){border-top-right-radius:10px;border-bottom-right-radius:10px}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{background:rgba(255,255,255,.5)}.bg-none[_ngcontent-%COMP%]{background:none}.searchbar[_ngcontent-%COMP%]{background:rgba(255,255,255,.5);border-radius:1rem;padding:.8rem 1rem;width:100%;display:flex;align-items:center;gap:1rem;box-shadow:0 5px 16px -4px #1018281a,0 4px 6px -2px #10182808}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none;border:none;background:transparent;width:100%;font-size:14px}.avatar[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border-radius:50%;object-fit:cover;aspect-ratio:1/1}.actionBtn[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;cursor:pointer;border-radius:50%;padding:.5rem;width:2.5rem;height:2.5rem;transition:all .3s ease-in-out}.actionBtn.text-primary[_ngcontent-%COMP%]{background:var(--primary-light-color)}.actionBtn.text-danger[_ngcontent-%COMP%]{background:var(--danger-light-color)}.actionBtn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.actionBtn[_ngcontent-%COMP%]:active{transform:scale(.95)}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;background:rgba(255,255,255,.8)}.table-responsive[_ngcontent-%COMP%]{height:calc(100vh - 23em);overflow-y:scroll}"]}),o})(),data:{title:"Customers"}},{path:"appointments",component:L,data:{title:"Appointments"}},{path:"users",component:q,data:{title:"Users"}},{path:"staff",component:T,data:{title:"Staff"}}]},{path:"**",redirectTo:"home"}];let j=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.Bz.forChild(N),p.Bz]}),o})(),z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.ez,j,f.K]}),o})()}}]);